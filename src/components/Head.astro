---
import { ViewTransitions } from "astro:transitions";
---

<script is:inline>
  function init() {
    let theme = (() => {
      if (
        typeof localStorage !== "undefined" &&
        localStorage.getItem("theme")
      ) {
        return localStorage.getItem("theme");
      }
    })();
    document.documentElement.setAttribute("data-theme", theme ?? "night");
  }
  init();
  document.addEventListener("astro:after-swap", () => {
    init();
  });
</script>

<ViewTransitions fallback="none"/>
